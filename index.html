<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Timeblock Harian</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
    }
    .timeblock {
      display: grid;
      grid-template-columns: 100px 1fr 100px;
      gap: 10px;
      margin-bottom: 5px;
      align-items: center;
    }
    .hour {
      text-align: right;
      font-weight: bold;
    }
    textarea {
      width: 100%;
      height: 40px;
      resize: none;
      padding: 5px;
      font-size: 14px;
      border-radius: 5px;
    }
    .past { background-color: #d3d3d3; }
    .present { background-color: #ffb3b3; }
    .future { background-color: #b3ffb3; }
    button {
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      background: #333;
      color: white;
      cursor: pointer;
    }
    #clearAll {
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>

  <h1>Timeblock Harian</h1>
  <div id="container"></div>
  <button id="clearAll">Clear Semua</button>

  <script>
    const container = document.getElementById('container');
    const startHour = 5;
    const endHour = 22;
    const now = new Date();
    const currentHour = now.getHours();

    for (let hour = startHour; hour <= endHour; hour++) {
      const hourLabel = (hour < 10 ? "0" : "") + hour + ":00";
      const key = "timeblock_" + hour;

      const block = document.createElement('div');
      block.className = "timeblock";

      const label = document.createElement('div');
      label.className = "hour";
      label.innerText = hourLabel;

      const input = document.createElement('textarea');
      input.value = localStorage.getItem(key) || "";

      if (hour < currentHour) input.classList.add("past");
      else if (hour === currentHour) input.classList.add("present");
      else input.classList.add("future");

      input.addEventListener('change', () => {
        localStorage.setItem(key, input.value);
      });

      const saveBtn = document.createElement('button');
      saveBtn.innerText = "Simpan";
      saveBtn.onclick = () => localStorage.setItem(key, input.value);

      block.appendChild(label);
      block.appendChild(input);
      block.appendChild(saveBtn);
      container.appendChild(block);
    }

    document.getElementById("clearAll").addEventListener('click', () => {
      if (confirm("Hapus semua catatan?")) {
        for (let hour = startHour; hour <= endHour; hour++) {
          localStorage.removeItem("timeblock_" + hour);
        }
        location.reload();
      }
    });
  </script>

</body>
</html>
